server.port=${port:8082}
spring.application.name=orders

# MongoDB Configuration
spring.data.mongodb.uri=mongodb://${db:orders-db}:27017/data?retryWrites=true&retryReads=true&maxPoolSize=100&minPoolSize=10&maxIdleTimeMS=60000&serverSelectionTimeoutMS=10000&connectTimeoutMS=10000&socketTimeoutMS=30000

# Spring Boot 3 Actuator endpoints configuration
management.endpoints.web.base-path=/
management.endpoints.web.exposure.include=prometheus
management.endpoint.health.enabled=false
management.endpoint.metrics.enabled=false
management.endpoint.prometheus.enabled=true
management.metrics.export.prometheus.enabled=true
management.endpoints.web.path-mapping.prometheus=metrics


# Micrometer tracing configuration (replaces Spring Cloud Sleuth)
management.tracing.enabled=${zipkin_enabled:true}
management.tracing.sampling.probability=1.0
management.zipkin.tracing.endpoint=http://${zipkin_host:jaeger-collector.observability.svc.cluster.local}:9411/api/v2/spans
management.tracing.baggage.enabled=true
management.tracing.baggage.remote-fields=x-vcap-request-id,x-request-id
management.tracing.propagation.type=B3

# Exclude health checks and actuator endpoints from tracing
management.tracing.sampling.exclude-patterns=/health,/actuator/**,/metrics,/prometheus
